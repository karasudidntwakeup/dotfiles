#!/bin/sh

# Disable shell history
unset HISTFILE

# If no argument is given, get link from clipboard
if [ -z "$1" ]; then
    if command -v wl-paste >/dev/null 2>&1; then
        LINK=$(wl-paste)
    else
        echo "wl-paste not found. Please install wl-clipboard."
        exit 1
    fi
else
    LINK="$1"
fi

# Check if we actually have a link
if [ -z "$LINK" ]; then
    echo "No link provided or found in clipboard."
    exit 1
fi

# Run webtorrent with mpv
webtorrent "$LINK" --mpv

